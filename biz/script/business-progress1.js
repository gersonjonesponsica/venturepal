var tableViewData,list=new Array("Sales","Cost of Sales","Begin Inventory","Purchase Inventory","Available","End Inventory","Total Cost of sales","Operating Expences","Fuel and Oil","Wages and Salary","Utilities","Rental","Deprecesion","Investments","Miscelleneos","Office Supply","Prof Expences","Benefits","Total OE","Net Income");function checkSubscription(){var e=[];$("#loadthissmall").addClass("loader-show-small");var a=$("#userid").val();e.push({name:"userid",value:a}),e.push({name:"action",value:"Check investor subscription"}),$.ajax({type:"POST",url:"controller/ReportsController.php",data:e,success:function(e){0==JSON.parse(jQuery.trim(e))?$("#subcribeModal").modal({show:!0}):($("#dailyModal").modal({show:!0}),chart()),$("#loadthissmall").removeClass("loader-show-small")}})}function chart(e){$("#loadthis").addClass("loader-show");var a=$("#msme_id").val(),t=$("#year2_").attr("data-id"),l=$("#report_title").attr("data-file"),r=$("#report_title").attr("data-id");$("#report_title").html("Monthly "+l+" Report"),$("#chartContainer").removeClass("fadeIn");var n=[];n.push({name:"type",value:r}),n.push({name:"year",value:t}),n.push({name:"msme_id",value:a}),n.push({name:"action",value:"Get annual report"}),$.ajax({type:"POST",url:"controller/ReportsController.php",data:n,success:function(e){var a=JSON.parse(jQuery.trim(e));new CanvasJS.Chart("chartContainer",{data:[{type:"column",dataPoints:[{y:parseInt(a[0].Jan),label:"January"},{y:parseInt(a[0].Feb),label:"February"},{y:parseInt(a[0].Mar),label:"March"},{y:parseInt(a[0].Apr),label:"April"},{y:parseInt(a[0].May),label:"May"},{y:parseInt(a[0].June),label:"June"},{y:parseInt(a[0].July),label:"July"},{y:parseInt(a[0].Aug),label:"August"},{y:parseInt(a[0].Sept),label:"September"},{y:parseInt(a[0].Oct),label:"October"},{y:parseInt(a[0].Nov),label:"November"},{y:parseInt(a[0].Dec),label:"December"}]}]}).render(),$("#chartContainer").addClass("animated fadeIn"),$("#loadthis").removeClass("loader-show")}})}function dateclick(e){$("#loadthis").addClass("loader-show");var a=$(e).attr("data-file"),t=$(e).attr("data-id"),l=$("#msme_id").val();$("#date").html(a),$("#date").val(t);var r=[];r.push({name:"date_report",value:t}),r.push({name:"msme_id",value:l}),r.push({name:"action",value:"Check Date"}),$.ajax({type:"POST",url:"controller/ReportsController.php",data:r,success:function(e){0!=(e=JSON.parse(jQuery.trim(e))).length&&void 0!=e&&($("#sales").val(e.sales),$("#begininventory").val(e.begin_inventory),$("#purchaseinventory").val(e.purchase_inventory),$("#available").val(e.available),$("#endinventory").val(e.end_inventory),$("#totalcostofsales").val(e.total_cost_sales),$("#fuelandoil").val(e.fuel_oil),$("#wagesandsalary").val(e.wages_salary),$("#rental").val(e.rental),$("#utilities").val(e.utilities),$("#investments").val(e.investments),$("#miscelleneos").val(e.miscellaneous),$("#officesupply").val(e.office_supply),$("#profexpences").val(e.pro_expences),$("#benefits").val(e.benefits),$("#totaloe").val(e.total_oe),$("#netincome").val(e.net_income),$("#deprecesion").val(e.deprecesion)),console.log(e),$("#loadthis").removeClass("loader-show"),$("#myModal").modal({show:!0})}})}function changeData(){var e=+removeCommas($("#begininventory").val()),a=+removeCommas($("#purchaseinventory").val()),t=+removeCommas($("#endinventory").val()),l=e+a;$("#available").val(numberWithCommas(l));var r=l-t;$("#totalcostofsales").val(numberWithCommas(r));for(var n=0,o=8;o<list.length-2;o++){var s=list[o].toString().toLowerCase().replace(/\s+/g,""),i=+removeCommas($("#"+s).val());n+=parseInt(i)}$("#totaloe").val(numberWithCommas(n));var c=+removeCommas($("#sales").val());$("#netincome").val(numberWithCommas(c-r-n))}function select_report(e){var a=$(e).attr("data-file"),t=$(e).attr("data-id");$("#report_title").attr("data-file",a),$("#report_title").attr("data-id",t),chart()}function select_year(e){var a=$(e).attr("data-id");$("#year2_").attr("data-id",a),$("#txtYear").html(" of Year "+a),chart()}function removeCommas(e){return e.toString().replace(/,/g,"")}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function testDecimals(e){return null===e.match(/\./g)?0:e.match(/\./g)}function replaceCommas(e){var a=e.toString().split(".");return 1===a.length&&(a[0]=e),a[0]=a[0].replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),2===a.length&&(a[1]=a[1].replace(/\D/g,"")),a.join(".")}$("#btnDailyModal").click(function(){checkSubscription()}),$("input.haha").keyup(function(e){e.which>=37&&e.which<=40&&e.preventDefault();var a=$(this).val();testDecimals(a).length>1&&(console.log("You cannot enter more than one decimal point"),a=a.slice(0,-1)),$(this).val(replaceCommas(a))});