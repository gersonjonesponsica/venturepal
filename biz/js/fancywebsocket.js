var FancyWebSocket=function(n){var o={};this.bind=function(n,t){return o[n]=o[n]||[],o[n].push(t),this},this.send=function(n,o){return this.conn.send(o),this},this.connect=function(){"function"==typeof MozWebSocket?this.conn=new MozWebSocket(n):this.conn=new WebSocket(n),this.conn.onmessage=function(n){t("message",n.data)},this.conn.onclose=function(){t("close",null)},this.conn.onopen=function(){t("open",null)}},this.disconnect=function(){this.conn.close()};var t=function(n,t){var c=o[n];if(void 0!==c)for(var e=0;e<c.length;e++)c[e](t)}};